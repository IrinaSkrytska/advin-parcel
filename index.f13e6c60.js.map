{"mappings":"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","sources":["src/index.js"],"sourcesContent":["// import Notiflix from 'notiflix';\n// import { Notify } from 'notiflix/build/notiflix-notify-aio';\n\nconst IS_ANDROID = /android/i.test(navigator.userAgent);\nconst IS_IOS =\n  (/iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream) ||\n  (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1);\n\nconst IS_SAFARI = /Safari\\//.test(navigator.userAgent);\nconst IS_FIREFOX = /firefox/i.test(navigator.userAgent);\nconst IS_OCULUS = /OculusBrowser/.test(navigator.userAgent);\nconst IS_IOS_CHROME = IS_IOS && /CriOS\\//.test(navigator.userAgent);\nconst IS_IOS_SAFARI = IS_IOS && IS_SAFARI;\n\nconst SUPPORTS_SCENEVIEWER = IS_ANDROID && !IS_FIREFOX && !IS_OCULUS;\nconst SUPPORTS_QUICKLOOK = (() => {\n  const anchor = document.createElement('a');\n  return (\n    anchor.relList && anchor.relList.supports && anchor.relList.supports('ar')\n  );\n})();\n\nconst activateAR = (href, isQuickLook, button) => {\n  const anchor = document.createElement('a');\n  if (isQuickLook) {\n    isQuickLook = true;\n\n    anchor.appendChild(document.createElement('img'));\n    anchor.rel = 'ar';\n  }\n  anchor.setAttribute('href', href);\n  anchor.click();\n\n  // return Notiflix.Loading.hourglass('AR may need a few seconds to load...');\n\n  anchor.addEventListener('message', event => {\n    button.dispatchEvent(new CustomEvent('quick-look-button-tapped'));\n  });\n};\n\nconst handleClickAR = (event, button, id) => {\n  console.log(button);\n  // IS_IOS_CHROME || IS_IOS_SAFARI;\n  if (IS_IOS_CHROME || IS_IOS_SAFARI) {\n    button.setAttribute('ar', 'quick-look');\n    button.dispatchEvent(\n      new CustomEvent('initialized', { detail: 'quick-look' })\n    );\n\n    const secret = 'ess';\n    const ar = 'armodels';\n\n    fetch(`https://advin-mjao.onrender.com/api/gu${secret}/${ar}/${id}`, {\n      cache: 'no-store',\n    })\n      .then(response => response.json())\n      .then(({ data }) => {\n        const iosSrc = data.model.ios;\n\n        let href = `${iosSrc}#custom=https://lustrous-medovik-40e333.netlify.app/witness.html`;\n        console.log(href);\n\n        activateAR(href, button, true);\n\n        if (!iosSrc) {\n          console.error('Invalid ios-src in <ar-button>: ' + button);\n          return;\n        }\n      });\n  } else if (SUPPORTS_SCENEVIEWER) {\n    // system supports AR via scene viewer\n    button.setAttribute('ar', 'scene-viewer');\n    button.dispatchEvent(\n      new CustomEvent('initialized', { detail: 'scene-viewer' })\n    );\n\n    const secret = `api/`;\n\n    const guess = `ess/`;\n    const ar = 'armodels';\n    fetch(`https://advin-mjao.onrender.com/${secret}gu${guess}${ar}/${id}`, {\n      cache: 'no-store',\n    })\n      .then(response => response.json())\n      .then(({ data }) => {\n        const src = data.model.android;\n        console.log(src);\n\n        let href = null;\n        href = `intent://arvr.google.com/scene-viewer/1.0?file=${src}&mode=ar_only&resizable=false&disable_occlusion=true&`;\n\n        if (!src) {\n          console.error('Invalid src in <ar-button>: ' + button);\n          return;\n        }\n\n        href +=\n          `#Intent;scheme=https;` +\n          `package=com.google.ar.core;` +\n          `action=android.intent.action.VIEW;`;\n\n        href += `end;`;\n        activateAR(href);\n      });\n  } else if (IS_IOS && !IS_IOS_SAFARI && !IS_IOS_CHROME) {\n    console.log('it`s a desktop');\n\n    button.setAttribute('ar', 'unsupported_ios');\n    button.dispatchEvent(\n      new CustomEvent('initialized', { detail: 'unsupported_ios' })\n    );\n    if (button.getAttribute('show-if-unsupported') != null) {\n      button.addEventListener('click', () => {\n        const fallbackUrl = button.getAttribute('fallback-url');\n        if (fallbackUrl) {\n          activateAR(encodeURIComponent(fallbackUrl));\n        }\n      });\n    } else if (IS_IOS && !IS_IOS_SAFARI && !IS_IOS_CHROME) {\n      button.setAttribute('ar', 'unsupported_ios');\n      button.dispatchEvent(\n        new CustomEvent('initialized', { detail: 'unsupported_ios' })\n      );\n      if (button.getAttribute('show-if-unsupported') != null) {\n        button.addEventListener('click', () => {\n          const fallbackUrl = button.getAttribute('fallback-url');\n          if (fallbackUrl) {\n            activateAR(encodeURIComponent(fallbackUrl));\n          }\n        });\n      } else {\n        button.style.display = 'none';\n      }\n    } else if (IS_IOS && !IS_IOS_SAFARI && !IS_IOS_CHROME) {\n      button.setAttribute('ar', 'unsupported_ios');\n      button.dispatchEvent(\n        new CustomEvent('initialized', { detail: 'unsupported_ios' })\n      );\n      if (button.getAttribute('show-if-unsupported') != null) {\n        button.addEventListener('click', () => {\n          const fallbackUrl = button.getAttribute('fallback-url');\n          if (fallbackUrl) {\n            activateAR(encodeURIComponent(fallbackUrl));\n          }\n        });\n      } else {\n        button.style.display = 'none';\n      }\n    } else {\n      button.setAttribute('ar', 'unsupported');\n      button.dispatchEvent(\n        new CustomEvent('initialized', { detail: 'unsupported' })\n      );\n      if (button.getAttribute('show-if-unsupported') != null) {\n        button.addEventListener('click', () => {\n          const fallbackUrl = button.getAttribute('fallback-url');\n          if (fallbackUrl) {\n            activateAR(encodeURIComponent(fallbackUrl));\n          }\n        });\n      } else {\n        button.style.display = 'none';\n      }\n    }\n  }\n};\n\nconst buttons = document.querySelectorAll('ar-button');\nfor (let i = 0; i < buttons.length; i++) {\n  const button = buttons.item(i);\n  const id = String(button.getAttribute('data-id'));\n  console.log(id);\n  button.addEventListener('click', event => handleClickAR(event, button, id));\n}\n"],"names":["$1f0dc3b9307be026$var$IS_ANDROID","test","navigator","userAgent","$1f0dc3b9307be026$var$IS_IOS","window","MSStream","platform","maxTouchPoints","$1f0dc3b9307be026$var$IS_SAFARI","$1f0dc3b9307be026$var$IS_FIREFOX","$1f0dc3b9307be026$var$IS_OCULUS","$1f0dc3b9307be026$var$IS_IOS_CHROME","$1f0dc3b9307be026$var$IS_IOS_SAFARI","$1f0dc3b9307be026$var$SUPPORTS_SCENEVIEWER","$1f0dc3b9307be026$var$activateAR","anchor","document","createElement","relList","supports","href","isQuickLook","button","appendChild","rel","setAttribute","click","addEventListener","event","dispatchEvent","CustomEvent","$1f0dc3b9307be026$var$handleClickAR","id","console","log","detail","fetch","cache","then","response","json","data","iosSrc","model","ios","error","src","android","getAttribute","fallbackUrl","encodeURIComponent","style","display","$1f0dc3b9307be026$var$buttons","querySelectorAll","i","length","item","String"],"version":3,"file":"index.f13e6c60.js.map"}