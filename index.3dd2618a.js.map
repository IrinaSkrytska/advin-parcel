{"mappings":"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","sources":["src/index.js"],"sourcesContent":["// import Notiflix from 'notiflix';\n// import { Notify } from 'notiflix/build/notiflix-notify-aio';\n\nconst IS_ANDROID = /android/i.test(navigator.userAgent);\nconst IS_IOS =\n  (/iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream) ||\n  (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1);\n\nconst IS_SAFARI = /Safari\\//.test(navigator.userAgent);\nconst IS_FIREFOX = /firefox/i.test(navigator.userAgent);\nconst IS_OCULUS = /OculusBrowser/.test(navigator.userAgent);\nconst IS_IOS_CHROME = IS_IOS && /CriOS\\//.test(navigator.userAgent);\nconst IS_IOS_SAFARI = IS_IOS && IS_SAFARI;\n\nconst SUPPORTS_SCENEVIEWER = IS_ANDROID && !IS_FIREFOX && !IS_OCULUS;\nconst SUPPORTS_QUICKLOOK = (() => {\n  const anchor = document.createElement('a');\n  return (\n    anchor.relList && anchor.relList.supports && anchor.relList.supports('ar')\n  );\n})();\n\nconst activateAR = (href, isQuickLook, button) => {\n  const anchor = document.createElement('a');\n  if (isQuickLook) {\n    isQuickLook = true;\n\n    anchor.appendChild(document.createElement('img'));\n    anchor.rel = 'ar';\n  }\n  anchor.setAttribute('href', href);\n  anchor.click();\n\n  // return Notiflix.Loading.hourglass('AR may need a few seconds to load...');\n\n  anchor.addEventListener('message', event => {\n    button.dispatchEvent(new CustomEvent('quick-look-button-tapped'));\n  });\n};\n\nconst handleClickAR = (event, button, id) => {\n  console.log(button);\n  // IS_IOS_CHROME || IS_IOS_SAFARI;\n  if (IS_IOS_CHROME || IS_IOS_SAFARI) {\n    button.setAttribute('ar', 'quick-look');\n    button.dispatchEvent(\n      new CustomEvent('initialized', { detail: 'quick-look' })\n    );\n\n    const secret = 'ess';\n    const ar = 'armodels';\n\n    fetch(`https://advin-mjao.onrender.com/api/gu${secret}/${ar}/${id}`, {\n      cache: 'no-store',\n    })\n      .then(response => response.json())\n      .then(({ data }) => {\n        const iosSrc = data.model.ios;\n\n        let href = `${iosSrc}#custom=https://lustrous-medovik-40e333.netlify.app/witness.html`;\n        console.log(href);\n\n        activateAR(href, button, true);\n\n        if (!iosSrc) {\n          console.error('Invalid ios-src in <ar-button>: ' + button);\n          return;\n        }\n      });\n  } else if (SUPPORTS_SCENEVIEWER) {\n    // system supports AR via scene viewer\n    button.setAttribute('ar', 'scene-viewer');\n    button.dispatchEvent(\n      new CustomEvent('initialized', { detail: 'scene-viewer' })\n    );\n\n    const secret = `api/`;\n\n    const guess = `ess/`;\n    const ar = 'armodels';\n    fetch(`https://advin-mjao.onrender.com/${secret}gu${guess}${ar}/${id}`, {\n      cache: 'no-store',\n    })\n      .then(response => response.json())\n      .then(({ data }) => {\n        const src = data.model.android;\n        console.log(src);\n\n        let href = null;\n        href = `intent://arvr.google.com/scene-viewer/1.0?file=${src}&mode=ar_only&resizable=false&disable_occlusion=true&`;\n\n        if (!src) {\n          console.error('Invalid src in <ar-button>: ' + button);\n          return;\n        }\n\n        href +=\n          `#Intent;scheme=https;` +\n          `package=com.google.ar.core;` +\n          `action=android.intent.action.VIEW;`;\n\n        href += `end;`;\n        activateAR(href);\n      });\n  } else if (IS_IOS && !IS_IOS_SAFARI && !IS_IOS_CHROME) {\n    console.log('it`s a desktop');\n\n    button.setAttribute('ar', 'unsupported_ios');\n    button.dispatchEvent(\n      new CustomEvent('initialized', { detail: 'unsupported_ios' })\n    );\n    if (button.getAttribute('show-if-unsupported') != null) {\n      button.addEventListener('click', () => {\n        const fallbackUrl = button.getAttribute('fallback-url');\n        if (fallbackUrl) {\n          activateAR(encodeURIComponent(fallbackUrl));\n        }\n      });\n    } else if (IS_IOS && !IS_IOS_SAFARI && !IS_IOS_CHROME) {\n      button.setAttribute('ar', 'unsupported_ios');\n      button.dispatchEvent(\n        new CustomEvent('initialized', { detail: 'unsupported_ios' })\n      );\n      if (button.getAttribute('show-if-unsupported') != null) {\n        button.addEventListener('click', () => {\n          const fallbackUrl = button.getAttribute('fallback-url');\n          if (fallbackUrl) {\n            activateAR(encodeURIComponent(fallbackUrl));\n          }\n        });\n      } else {\n        button.style.display = 'none';\n      }\n    } else if (IS_IOS && !IS_IOS_SAFARI && !IS_IOS_CHROME) {\n      button.setAttribute('ar', 'unsupported_ios');\n      button.dispatchEvent(\n        new CustomEvent('initialized', { detail: 'unsupported_ios' })\n      );\n      if (button.getAttribute('show-if-unsupported') != null) {\n        button.addEventListener('click', () => {\n          const fallbackUrl = button.getAttribute('fallback-url');\n          if (fallbackUrl) {\n            activateAR(encodeURIComponent(fallbackUrl));\n          }\n        });\n      } else {\n        button.style.display = 'none';\n      }\n    } else {\n      button.setAttribute('ar', 'unsupported');\n      button.dispatchEvent(\n        new CustomEvent('initialized', { detail: 'unsupported' })\n      );\n      if (button.getAttribute('show-if-unsupported') != null) {\n        button.addEventListener('click', () => {\n          const fallbackUrl = button.getAttribute('fallback-url');\n          if (fallbackUrl) {\n            activateAR(encodeURIComponent(fallbackUrl));\n          }\n        });\n      } else {\n        button.style.display = 'none';\n      }\n    }\n  }\n};\n\nconst buttons = document.querySelectorAll('ar-button');\nfor (let i = 0; i < buttons.length; i++) {\n  const button = buttons.item(i);\n  const id = String(button.getAttribute('data-id'));\n  console.log(id);\n  button.addEventListener('click', event => handleClickAR(event, button, id));\n}\n"],"names":["anchor","$b8f9b7833fa37166$var$_loop","i","button","$b8f9b7833fa37166$var$buttons","item","id","String","getAttribute","console","log","addEventListener","event","$b8f9b7833fa37166$var$handleClickAR","$b8f9b7833fa37166$var$IS_ANDROID","test","navigator","userAgent","$b8f9b7833fa37166$var$IS_IOS","window","MSStream","platform","maxTouchPoints","$b8f9b7833fa37166$var$IS_SAFARI","$b8f9b7833fa37166$var$IS_FIREFOX","$b8f9b7833fa37166$var$IS_OCULUS","$b8f9b7833fa37166$var$IS_IOS_CHROME","$b8f9b7833fa37166$var$IS_IOS_SAFARI","$b8f9b7833fa37166$var$SUPPORTS_SCENEVIEWER","$b8f9b7833fa37166$var$activateAR","document","createElement","relList","supports","href","isQuickLook","appendChild","rel","setAttribute","click","dispatchEvent","CustomEvent","detail","fetch","concat","cache","then","response","json","param","iosSrc","data","model","ios","error","src","android","fallbackUrl","encodeURIComponent","style","display","querySelectorAll","$b8f9b7833fa37166$var$i","length"],"version":3,"file":"index.3dd2618a.js.map"}